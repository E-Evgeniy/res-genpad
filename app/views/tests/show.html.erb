<p class = "href_general"><%= link_to 'To the main page', general_path %></p>

<p class = "h_result"><%= @test.testing_date %>  <%= @test.header %> от <%= @test.production_date %> </p>
<p class = "b_desc">Конфигурация <%= @test.configuration_number %></p>
<p class = "u_desc"><b>Cartridge type:</b> <%= @test.cartridge_type %></p>
<p class = "u_desc"><b>Configuration:</b> <%= @test.configuration_text %></p>
<p class = "u_desc"><b>Reagents:</b> <%= @test.reagent %></p>
<p class = "u_desc"><b>Solution:</b> <%= @test.fluid %></p>
<p class = "u_desc"><b>The test has been completed:</b> <%= @test.user.last_name %> <%= @test.user.first_name %></p>


<% if @result_test.nil? %>
  Нет данных для отображения
<% else %>
  <table class="result_table">
    <col width="50">
    <col width="100">
    <col width="80">
    <col width="80">
    <col width="80">
    <col width="80">
    <tr>
    <th class = 'th_result'>№</th>
    <th class = 'th_result'>Devices_id</th>
    <th class = 'th_result'><%= @result_test['name_channel_1'].upcase %></th>
    <th class = 'th_result'><%= @result_test['name_channel_2'].upcase %></th>
    <th class = 'th_result'><%= @result_test['name_channel_3'].upcase %></th>
    <th class = 'th_result'><%= @result_test['name_channel_4'].upcase %></th>
  </tr>

    <% i = 1%>
    <% @result_test['devices'].each do |key, test| %>
      <tr>
        <td class = 'th_result'><%= i %></td>
        <td class = 'th_result'><%= key %></td>
        <td class = 'th_result'><%= test['time_channel_1'] %></td>
        <td class = 'th_result'><%= test['time_channel_2'] %></td>
        <td class = 'th_result'><%= test['time_channel_3'] %></td>
        <td class = 'th_result'><%= test['time_channel_4'] %></td>
        <% i += 1 %>
      </tr>
    <% end %>
</table>
<p>
<table class="result_table">
  <col width="100">
  <col width="100">
  <col width="100">
  <col width="100">
  <col width="100">
  <col width="100">
  <col width="100">
  <col width="100">
  <col width="100">
  <col width="100">
  <col width="100">
  <col width="100">
  <tr>
    <th colspan="3" class = 'th_result' ><%= @result_test['name_channel_1'].upcase %></th>
    <th colspan="3" class = 'th_result' ><%= @result_test['name_channel_2'].upcase %></th>
    <th colspan="3" class = 'th_result' ><%= @result_test['name_channel_3'].upcase %></th>
    <th colspan="3" class = 'th_result' ><%= @result_test['name_channel_4'].upcase %></th>
  </tr>
  <tr>
    <th class = 'th_result'>Максимальное значение</th>
    <th class = 'th_result'>Минимальное значение</th>
    <th class = 'th_result'>Среднее значение</th>
    <th class = 'th_result'>Максимальное значение</th>
    <th class = 'th_result'>Минимальное значение</th>
    <th class = 'th_result'>Среднее значение</th>
    <th class = 'th_result'>Максимальное значение</th>
    <th class = 'th_result'>Минимальное значение</th>
    <th class = 'th_result'>Среднее значение</th>
    <th class = 'th_result'>Максимальное значение</th>
    <th class = 'th_result'>Минимальное значение</th>
    <th class = 'th_result'>Среднее значение</th>
  </tr>
  <tr>
    <td class = 'th_result'><%= @result_test['max_channel_1'] %></td>
    <td class = 'th_result'><%= @result_test['min_channel_1'] %></td>
    <td class = 'th_result'><%= @result_test['average_channel_1'] %></td>
    <td class = 'th_result'><%= @result_test['max_channel_2'] %></td>
    <td class = 'th_result'><%= @result_test['min_channel_2'] %></td>
    <td class = 'th_result'><%= @result_test['average_channel_2'] %></td>
    <td class = 'th_result'><%= @result_test['max_channel_3'] %></td>
    <td class = 'th_result'><%= @result_test['min_channel_3'] %></td>
    <td class = 'th_result'><%= @result_test['average_channel_3'] %></td>
    <td class = 'th_result'><%= @result_test['max_channel_4'] %></td>
    <td class = 'th_result'><%= @result_test['min_channel_4'] %></td>
    <td class = 'th_result'><%= @result_test['average_channel_4'] %></td>
  </tr>
  
</table>

<% @result_graph.each do |key, device| %>
  <p class = 'name_graph'> Device ID <%= key %> </p>
  <div class = 'graph'>
  <%= line_chart [
    {name: device['g1']['name'], data:  device['g1']['graph'], color: device['g1']['color']},
    {name: device['g2']['name'], data:  device['g2']['graph'], color: device['g2']['color']},
    {name: device['g3']['name'], data:  device['g3']['graph'], color: device['g3']['color']},
    {name: device['g4']['name'], data:  device['g4']['graph'], color: device['g4']['color']},
    {name: device['g0']['name'], data:  device['g0']['graph'], color: device['g0']['color']}
    
  ] %>
</div>
<% end %>



<% end %>